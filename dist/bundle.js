(()=>{"use strict";var e,t,n,o,r,a,c,u,i,l,s,d,m,v,f,p,h,g,y,q,S,E,L,w,A,b,C,k,x;w=document.querySelector("#timer-hours"),A=document.querySelector("#timer-minutes"),b=document.querySelector("#timer-seconds"),C=0,k=function(e){return 1===String(e).length?"0"+e:String(e)},(x=function(){var e,t,n,o,r=(t=0,n=0,o=0,(e=(new Date("30 May 2021").getTime()-(new Date).getTime())/1e3)>0&&(t=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/60/60)),{timeRemaining:e,hours:o,minutes:n,seconds:t});w.textContent=k(r.hours),A.textContent=k(r.minutes),b.textContent=k(r.seconds),r.timeRemaining<0&&clearInterval(C)})(),C=setInterval(x,1e3),E=document.querySelector("menu"),L=document.querySelectorAll("menu a"),window.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.matches("menu>ul>li>a")?E.classList.toggle("active-menu"):t.closest("menu")&&!t.matches(".close-btn")||E.classList.remove("active-menu")})),L.forEach((function(e){e.targer,e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");"#"!==n&&document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}))})),h=document.querySelector(".popup"),g=document.querySelectorAll(".popup-btn"),y=document.querySelector(".popup-content"),q={count:-445,speed:24,startPos:-445,endPos:0},S=function e(){q.startPos>q.endPos?q.count-=q.speed:q.count+=q.speed,y.style.transform="translateY(".concat(q.count,"px)"),(q.startPos>q.endPos?q.count>q.endPos:q.count<q.endPos)&&requestAnimationFrame(e)},g.forEach((function(e){e.addEventListener("click",(function(){h.style.display="block",screen.width>768&&(q.count=q.startPos,requestAnimationFrame(S))}))})),h.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?h.style.display="none":(t=t.closest(".popup-content"))||(h.style.display="none")})),document.querySelector("main a").addEventListener("click",(function(){var e=event.target.closest('[href^="#"]');if(e){var t=window.pageYOffset,n=e.href.replace(/[^#]*(.*)/,"$1"),o=document.querySelector(n).getBoundingClientRect().top,r=0;requestAnimationFrame((function e(n){r||(r=n);var a=n-r,c=o<0?Math.max(t-a/.15,t+o):Math.min(t+a/.15,t+o);window.scrollTo(0,c),c<t+o&&requestAnimationFrame(e)}))}})),v=document.querySelector(".service-header"),f=v.querySelectorAll(".service-header-tab"),p=document.querySelectorAll(".service-tab"),v.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&f.forEach((function(e,n){e===t&&function(e){for(var t=0;t<p.length;t++)e===t?(f[t].classList.add("active"),p[t].classList.remove("d-none")):(f[t].classList.remove("active"),p[t].classList.add("d-none"))}(n)}))})),d=document.querySelectorAll(".portfolio-item"),m=document.querySelector(".portfolio-dots"),d.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),m.appendChild(e)})),m.children[0].classList.add("dot-active"),o=document.querySelectorAll(".portfolio-item"),r=document.querySelectorAll(".dot"),a=document.querySelector(".portfolio-content"),c=0,u=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},l=function(){u(o,c,"portfolio-item-active"),u(r,c,"dot-active"),++c>=o.length&&(c=0),i(o,c,"portfolio-item-active"),i(r,c,"dot-active")},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;n=setInterval(l,e)},a.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(u(o,c,"portfolio-item-active"),u(r,c,"dot-active"),t.matches("#arrow-right")?c++:t.matches("#arrow-left")?c--:t.matches(".dot")&&r.forEach((function(e,n){e===t&&(c=n)})),c>=o.length&&(c=0),c<0&&(c=o.length-1),i(o,c,"portfolio-item-active"),i(r,c,"dot-active"))})),a.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),a.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500),function(){var e=document.querySelectorAll("input.calc-item"),t=document.querySelectorAll("[name=user_name]"),n=document.querySelectorAll("[name=user_message]"),o=document.querySelectorAll("[name=user_email]"),r=document.querySelectorAll("[name=user_phone]"),a=new Set,c=function(e){e.value=e.value.replace(/[^а-яё\-\ ]/gi,"")},u=function(e){e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");var t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))};function i(e){return e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")}var l=function(e,t){e.value.match(t)||(a.add(e.value),e.value="")};t.forEach((function(e){e.addEventListener("blur",(function(){u(e),e.value=i(e),l(e,/[а-яё]{2,}/gi)}))})),n.forEach((function(e){e.addEventListener("blur",(function(){l(e,/[^а-яё0-9\.\,\:\-\!\? ]{10,}/gi),e.value=i(e),u(e)}))})),o.forEach((function(e){e.addEventListener("blur",(function(){l(e,/\w+@\w+\.\w{2,3}/g),u(e)}))})),r.forEach((function(e){e.addEventListener("blur",(function(){u(e),l(e,/\+?[78]([-()]*\d)/g)}))})),window.addEventListener("input",(function(t){t.target.matches(".calc-item")&&e.forEach((function(e){e.value=e.value.replace(/[^\d]/g,"")})),t.target.matches("[name=user_name]")&&c(t.target),t.target.matches("#form2-message")&&c(t.target),t.target.matches("[name=user_email]")&&(t.target.value=t.target.value.replace(/[^a-z0-9\@\_\-\.\!\~\*\']/gi,"")),t.target.matches("[name=user_phone]")&&(t.target.value=t.target.value.replace(/[^\d\(\)\-\+]/g,""))}))}(),e=document.querySelector("#command .row"),t=function(){var e=event.target;if(e.classList.contains("command__photo")){var t=e.src;e.src=e.dataset.img,e.dataset.img=t}},e.addEventListener("mouseover",t),e.addEventListener("mouseout",t),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),u=function(){var t=0,u=1,l=1,s=n.options[n.selectedIndex].value,d=+o.value;a.value>1&&(u+=(a.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),s&&d&&(t=e*s*d*u*l),i({duration:2e3,timing:function(e){return e},draw:function(e){c.textContent=Math.floor(e*t)}})};function i(e){var t=e.duration,n=e.draw,o=e.timing,r=performance.now();requestAnimationFrame((function e(a){var c=(a-r)/t;c>1&&(c=1);var u=o(c);n(u),c<1&&requestAnimationFrame(e)}))}t.addEventListener("change",(function(e){var t=e.target;t!==n&&t!==o&&t!==r&&t!==a||u()}))}(100),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.createElement("div"),r=document.createElement("div");r.classList.add("circle"),o.style.cssText="font-size: 2rem; color: #fff";var a=function(e){e.addEventListener("submit",(function(t){t.preventDefault(),e.appendChild(o),e.appendChild(r);var n=new FormData(e),a={};n.forEach((function(e,t){a[t]=e})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(t){if(200!==t.status)throw new Error("status network not 200");document.querySelector(".circle").remove(),o.textContent="Спасибо, мы скоро с вами свяжемся!",setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),2e3),e.querySelectorAll("input").forEach((function(e){e.value=e.defaultValue}))})).catch((function(e){console.error(e),document.querySelector(".circle").remove(),o.textContent="Что-то пошло не так",setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),2e3)}))}))};a(e),a(t),a(n)}()})();